ТЕХНИЧЕСКИЙ ДОКУМЕНТ КОРПОРАЦИИ "ГАЛАКТИКА"
ЗАГОЛОВОК:
Информация по патчу: ALTER810_DECIMAL02
НАЗНАЧЕНИЕ:
Исправление ошибок
ПРОДУКТ и ВЕРСИЯ:
Галактика  8.10
РЕЛИЗ:
03.11.2006:A5.2.8:Релиз

ОТМЕНЯЮТСЯ ПРЕДЫДУЩИЕ ПАТЧИ:
ALTER810_DECIMAL01, 

ПРОТЕСТИРОВАН ПРИ УСТАНОВЛЕННЫХ ПАТЧАХ:
Нет ,

ПРЕДВАРИТЕЛЬНО ДОЛЖНЫ БЫТЬ УСТАНОВЛЕНЫ ПАТЧИ:
БАЗОВЫЕ ПАТЧИ:
Нет, 

ПРОЧИЕ ПАТЧИ (для обеспечения работоспособности):
Нет, 

ИНСТРУКЦИЯ ПО УСТАНОВКЕ:


Для конвертации выполнить действия описанные в README.TXT  



ИЗМЕНЕННЫЕ БАЗОВЫЕ ФОРМЫ:
Нет
-----------------------------------------------------------------------
1. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL01 
ПРОБЛЕМА В ПИР:
101.38227
КРАТКОЕ ОПИСАНИЕ:
Округление в стоимости по позиции
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Управление сбытом / Акты на услуги, работы
ЧТО ИЗМЕНЕНО:
Проблема с округлением в стоимости по позициям
спецификации. Примеры работы функционала в 8,1 и в 7,12
см. во вложенном файле. Также прилагаю мой отчет о
версиях компонент. Необходимо, чтобы в версии 8,1 была
возможность настроить округление так же как и в версии
7,12.
КАК ИЗМЕНЕНО:
Докомпилятор изменяет поля типа Decimal(24,8) на тип Decimal(24,15).
Т.е увеличивает количество цифр после запятой с 8 до 15.
Представление поля "Стоимость" будет согласно Настройкам округления
по соответствующим модулям
-----------------------------------------------------------------------
2. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL01 
ПРОБЛЕМА В ПИР:
101.38560
КРАТКОЕ ОПИСАНИЕ:
Пересчет  цены и стоимости
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Управление сбытом / Акты на услуги, работы
ЧТО ИЗМЕНЕНО:
Настройки:
 Изменение суммы в сопроводительных документах =
изменять цену Округление в документах сбыта =математическое
 ..значения в НДЕ округлять до=0.01
 Создаю акт на оказание услуг. Ввожу в
спецификации количество 3210959, ввожу стоимость
4152412,22. В версии 8,1 после этого происходит следующий
пересчет:
 цена = 1.29320001, стоимость =4152412.21090959
 В версии 7,12 после аналогичных действий следующий
пересчет:
 цена = 1.29320001283106, стоимость = 4152412.22.
 Необходимо, чтобы в версии 8,1 функционал
отрабатывал аналогично 7,12. Просьба исправить ошибку
или предложить другое решение.
КАК ИЗМЕНЕНО:
Докомпилятор изменяет поля типа Decimal(24,8) на тип Decimal(24,15).
Т.е увеличивает количество цифр после запятой с 8 до 15.
Представление поля "Стоимость" будет согласно Настройкам округления
по соответствующим модулям
-----------------------------------------------------------------------
3. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL01 
ПРОБЛЕМА В ПИР:
102.73699
КРАТКОЕ ОПИСАНИЕ:
не верны стоимости в накладной и наследуемых документах есть стать на поле
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Управление снабжением / Приходные накладные
ЧТО ИЗМЕНЕНО:
1) Включаем округление:
 НДЕ до 1
 валюту до 0.01
2) вводим накладную в евро:
 курс евро 2930.01
 кол-во 5760
 цена в евро 0.6608
 получаем, если стать на поле стоимость в евро получаем 3806.210016, а 
должно 3806.208 получаем, если стать на поле стоимость в НДЕ получаем 
11152227.9999744, а должно 11152227.50208
 В версии 8.0 это работало. Со статусом "Критичные
предложения по функциональности" не согласен. Это в
чистом виде ошибка из-за перехода на Decimal.
 Прошу обратить внимание на эту проблему, потому
что эти цифры затем переходят в др. документы:
 счета-фактуры
 книгу покупок/продаж
 скл.ордер (эту часть вроде уже исправляют патчнем)
 проводки
Бухгалтерия клиента жалуется. Админа скоро зарежут. 

КАК ИЗМЕНЕНО:
Докомпилятор изменяет поля типа Decimal(24,8) на тип Decimal(24,15). Т.е 
увеличивает количество цифр после запятой с 8 до 15.
Представление поля "Стоимость" будет согласно Настройкам округления по 
соответствующим модулям
-----------------------------------------------------------------------
4. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL01 
ПРОБЛЕМА В ПИР:
102.74422
КРАТКОЕ ОПИСАНИЕ:
новое свойство интерфейса
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Складской учет (склад,матценности) / Приходный складской ордер
ЧТО ИЗМЕНЕНО:
новое свойство интерфейса по сравнению с версией 8.0
(см.вложение)
- клиента пугает, хотя насколько смог - проверил - ни где более в
отчетах не выплывает - может это аналогично 102.71251 ?
КАК ИЗМЕНЕНО:
Докомпилятор изменяет поля типа Decimal(24,8) на тип Decimal(24,15).
Т.е увеличивает количество цифр после запятой с 8 до 15.
Представление поля "Стоимость" будет согласно Настройкам округления
по соответствующим модулям
-----------------------------------------------------------------------
5. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL01 
ПРОБЛЕМА В ПИР:
102.76083
КРАТКОЕ ОПИСАНИЕ:
на списке актов на списание стоимости с 3 на хвосте
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Складской учет (склад,матценности) / АКТ на списание МЦ
ЧТО ИЗМЕНЕНО:
Хотелось бы чтобы на хвостах троек лишних не было.
КАК ИЗМЕНЕНО:
Докомпилятор изменяет поля типа Decimal(24,8) на тип Decimal(24,15).
Т.е увеличивает количество цифр после запятой с 8 до 15.
Представление поля "Стоимость" будет согласно Настройкам округления
по соответствующим модулям
-----------------------------------------------------------------------
6. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL01 
ПРОБЛЕМА В ПИР:
102.76211
КРАТКОЕ ОПИСАНИЕ:
Стоимость в приходной накладной
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Управление снабжением / Приходные накладные
ЧТО ИЗМЕНЕНО:
В приходной накладной вводим позицию спецификации и
задаем количество 11 штук и стоимость 15000. После
ввода других позиций возвращаемся в стоимость первой и
видим, что она стала 15000.00000004. Или вводим
количество 11 штук и стоимость 17000 и получаем
стоимость 16999.99999995.
"Настройки Галактики\Логистика\Документы\Управление
снабжением\..значения в НДЕ округлять до" стоит 1.00
КАК ИЗМЕНЕНО:
Докомпилятор изменяет поля типа Decimal(24,8) на тип Decimal(24,15).
Т.е увеличивает количество цифр после запятой с 8 до 15.
Представление поля "Стоимость" будет согласно Настройкам округления
по соответствующим модулям
-----------------------------------------------------------------------
7. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL01 
ПРОБЛЕМА В ПИР:
102.76220
КРАТКОЕ ОПИСАНИЕ:
Стоимость при формировании накладной по ДО
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Управление снабжением / Приходные накладные
ЧТО ИЗМЕНЕНО:
Стоят следующие настройки:
 1. "Настройки
Галактики\Логистика\Документы\Сопроводительные
документы\Цены в НДЕ при формировании накладной по ДО"
стоит округлять;
2."Настройки
Галактики\Логистика\Документы\Сопроводительные
документы\Правила округления при формировании накладной
по ДО (в НДЕ, в валюте)" стоит учитывать;
3."Настройки Галактики\Логистика\Документы\Управление
снабжением\..значения в НДЕ округлять до" до 0,01
_____________________________________________________________________
 Вводим новое ДО с позицией спецификации в
количестве 3 штуки и стоимостью 55 рублей, получаем
расчетную цену равную 18.33333333. Создаем на основе ДО
приходную накладную и видим, что цена округлилось до
18.33 рублей и стоимость по позиции стала
соответственно 54.99999999, а должно быть все как в ДО.

КАК ИЗМЕНЕНО:
Докомпилятор изменяет поля типа Decimal(24,8) на тип Decimal(24,15). Т.е 
увеличивает количество цифр после запятой с 8 до 15.
Представление поля "Стоимость" будет согласно Настройкам округления по 
соответствующим модулям
-----------------------------------------------------------------------
8. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL01 
ПРОБЛЕМА В ПИР:
103.3637
КРАТКОЕ ОПИСАНИЕ:
Неверное округления стоимости в спецификации накладных и складских ордеров
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Управление сбытом / Накладные на отпуск
ЧТО ИЗМЕНЕНО:
Неверное округления стоимости в спецификации накладных и складских ордеров
КАК ИЗМЕНЕНО:
Докомпилятор изменяет поля типа Decimal(24,8) на тип Decimal(24,15).
Т.е увеличивает количество цифр после запятой с 8 до 15.
Представление поля "Стоимость" будет согласно Настройкам округления
по соответствующим модулям
-----------------------------------------------------------------------
9. ПЕРВОЕ РЕШЕНИЕ:
ALTER810_DECIMAL02 
ПРОБЛЕМА В ПИР:
180.3397
КРАТКОЕ ОПИСАНИЕ:
Невозможно ввести необходимую сумму в ДО при большом значении количества.
ПРОЕКТ / ДЕТАЛИЗАЦИЯ:
Контур логистики / Все по оперативному контуру
ЧТО ИЗМЕНЕНО:
Проблема решается увеличением числа разрядов в дробной части поля 
SpStep.Price.
КАК ИЗМЕНЕНО:
Необходимо докомпилировать словарь. А именно поле SpStep.Price с 
Decimal(24, 8) на Decimal(24, 15).
-----------------------------------------------------------------------
